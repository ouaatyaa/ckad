kubectl taint nodes kworker2 app=blue:NoSchedule      << To taint

kubectl taint nodes node1 key1=value1:NoSchedule-    << To remove Taint

apiVersion: v1
kind: Pod
metadata:
  name: nginx
  labels:
    env: test
spec:
  containers:
  - name: nginx
    image: nginx
    imagePullPolicy: IfNotPresent
  tolerations:
  - key: "app"
    operator: "Equal"
    value: "blue"
    effect: "NoSchedule"         << hadi 7etahia rahmohima il faut qu'il soit identique le taint du node


"NoExecute"


root@kmaster:~# k taint node  kworker1 app=prod:NoSchedule
node/kworker1 tainted
root@kmaster:~# 
root@kmaster:~# k label no kworker1 env=prod
node/kworker1 labeled
root@kmaster:~# 
root@kmaster:~# 
root@kmaster:~# k taint node kworker1 app=prod:NoSchedule-
node/kworker1 untainted
root@kmaster:~# k label no kworker1 env-
-----------------------------------------------^^^^^^
root@kmaster:~# cat affinity-taint.yml 
apiVersion: v1
kind: Pod
metadata:
  name: nginx3
spec:
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: env 
            operator: In 
            values:
            - prod 
  containers:
  - image: nginx
    name: nginx
  tolerations:
  -  effect: NoSchedule
     key: app	
     operator: Equal 
     value: prod