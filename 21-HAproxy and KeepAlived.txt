
-----------------------------------------------------------------------------------
-------------------------------------------HAproxy and KeepAlived----------------------------------------

needed for Highly k8s cluster (multiMaster ) OR ingress :

## Set up load balancer node
##### Install Haproxy
```
apt update && apt install -y haproxy
```
##### Configure haproxy
Append the below lines to **/etc/haproxy/haproxy.cfg**
```
frontend kubernetes-frontend
    bind 192.168.56.100:6443
    mode tcp
    option tcplog
    default_backend kubernetes-backend

backend kubernetes-backend
    mode tcp
    option tcp-check
    balance roundrobin
    server kmaster1 192.168.56.10:6443 check fall 3 rise 2
    server kmaster2 192.168.56.20:6443 check fall 3 rise 2
```
##### Restart haproxy service
```
systemctl restart haproxy
```

frontend nginx-frontend
    bind 192.168.56.130:9000
    mode tcp
    option tcplog
    default_backend nginx-backend

backend nginx-backend
    mode tcp
    option tcp-check
    balance roundrobin
    server knod1 192.168.56.12:80 check fall 3 rise 2
    server knod2 192.168.56.11:80 check fall 3 rise 2

